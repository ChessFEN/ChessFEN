angular.module("chessStories").directive("appHelp",["$timeout","websiteService",function(t,e){return{restrict:"EA",scope:!1,templateUrl:"/static001767/app/shared/help/helpView.html",link:function(l,a,n){t(function(){$(".help-cont").addClass("fader")},10),l.showHelp=function(t){e.go("help",!0)},l.add_help_event_handlers=function(t){if(!t.hasClass("has_help_evh")){t.addClass("has_help_evh"),t.on("click","[data-ref]",function(t){t.ctrlKey||t.shiftKey||t.altKey||e(this)});var e=function(t){a();var e=$(t).attr("data-ref"),n=$(t).attr("data-blink");l.nav_to_selector(e,n)},a=function(){$(".blink").removeClass("blink"),$(".blinkshort").removeClass("blinkshort"),d3.selectAll(".blink").classed("blink",!1),d3.selectAll(".blinkshort").classed("blinkshort",!1)},n=null,i=function(){n&&(clearTimeout(n),n=null)};t.on("mouseleave","[data-blink]",function(t){i(),a()}),t.on("mouseenter","[data-blink]",function(t){i();var a=$(this);l.uprefs.hide_arrows=!1;var s=a.attr("data-blink"),r=d3.selectAll(s);if(r&&!$(r[0]).is(":visible")){var o=$(r[0]),c=l.topic_of(o)||a.attr("data-topic");c&&""!=c&&(l.currTab.currJob&&(l.currTab.currJob.topic=c),l.$apply(),r=d3.selectAll(s),o=$(r[0]),l.setActiveElement(o))}a.attr("data-ref")?r.classed("blinkshort",!0):r.classed("blink",!0),l.scrollIntoView(null,r[0]),a.attr("data-ref")&&function(t){i(),n=setTimeout(function(){e(t)},1500)}(a),l.$apply()})}}},controller:["$scope",function(t){}]}}]);
