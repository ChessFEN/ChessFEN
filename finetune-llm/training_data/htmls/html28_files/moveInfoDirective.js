"use strict";angular.module("chessStories").directive("appMoveInfo",[function(){return{restrict:"EA",scope:{toggleFn:"=",popupMsg:"=popupMsgCtrl",currTab:"=",currFen:"=",ga:"="},templateUrl:"/static001767/app/shared/moveInfo/moveInfoView.html",controllerAs:"move_info",controller:["$scope","i18nService","$filter",function(e,n,o){function r(n){e.qual_word=function(n){var o=n.loss;return n&&"loss"in n&&null!==n.loss?n.opname?"":o>200?e.i18n.blunder:o>90?e.i18n.mistake:o>48?e.i18n.inaccuracy:o>9?"":"ace"in n&&n.ace&&n.ace>100?e.i18n.notable_move:"":""}(n),e.loss_str=function(n){var o=n.loss;return o>9e4?"(-#)":_.isFinite(o)?"("+e.i18n.cp_loss+": "+o+")":""}(n),e.best_alt=function(e){return e&&"loss"in e&&null!==e.loss?e.opname?"":e.loss>0&&e.bestplay&&e.bestplay.length>0&&e.bestplay[0]?e.bestplay[0].san:"":""}(n),e.weak_recommend=n.loss&&n.loss<48}e.i18n=n.phrases,e.qual_word="",e.loss_str="",e.best_alt="",e.weak_recommend=!1,e.hide_section=function(){e.toggleFn("move_info","closed")},e.$watch("currFen",function(){e.currTab&&e.currTab.game&&r(e.currTab.game.curr_move)}),e.$on("score-game-done",function(n,o){if(e.currTab){var s=e.currTab.game;if(!s||o.game!==s)return;r(s.curr_move)}})}]}}]);
