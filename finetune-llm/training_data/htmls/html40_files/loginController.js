angular.module("chessStories").controller("loginController",["$scope","$timeout","authService","$state","websiteService","Kbd",function(o,n,e,t,i,d){o.mobile="none"==$("#mobile-canary").css("display"),o.data={},o.error=!1,o.data.model={u:"",p:""},o.showPswd=!1,o.login=function(){e.login(o.data.model).then(function(n){"ok"==n.data.status?t.go("index"):(console.log("login failed"),o.error=!0)},function(n){console.log("login err",n),o.error=!0})},o.forgot_pwd=function(){i.go("forgot_pwd")},o.onMousedownShowPswd=function(n){$(".login-input.password").attr("type","text"),o.showPswd=!0},o.onMouseupShowPswd=function(n){$(".login-input.password").attr("type","password"),o.showPswd=!1},$(document).unbind("keydown"),$(document).keydown(function(o){o.keyCode!=d.ESC||t.go("index")}),n(function(){},50),n(function(){},1e3)}]);
