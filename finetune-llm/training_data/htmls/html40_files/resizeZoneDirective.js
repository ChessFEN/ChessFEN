angular.module("chessStories").directive("appResizeZone",["$timeout",function(e){return{restrict:"EA",scope:!1,template:'<div class="resize-wrap"><div class="handle"><div><div></div></div></div></div>',link:function(i,t,n){var o=!1,a=$(t).offset().left;i.right_pct=50;resize=function(e){var n=$(".left-side").width(),o=$(".right-side").width(),a=1===i.game_panel_pos?188:0,s=$(".main-menu-cont").width(),d=3===i.game_panel_pos?188:0,r=$("#topcontainer").width()-s,c=$(t).width(),l=472;if(a?l=362:d&&(l=445),330===n&&e>0||o===l&&e<0)return!1;o+=e,((n-=e)<=330||o<=l)&&(n+=e,(o-=e)+e<=l&&(n+=o-l,o=l),n-e<=330&&(o+=n-330,n=330)),o+a+c+n+d>r&&(o=r-(a+n+d+c));var u=100*o/r;return $(".left-side").css("width",`calc(100% - ${u}% - ${a}px - ${d}px - ${c}px)`),$(".right-side").css("width",u+"%"),t.attr("aria-valuenow",u),i.right_pct=u,!0},i.$on("game-panel-pos-changed",function(t,n){n.newval===n.oldval||1!==n.newval&&1!==n.oldval&&3!==n.newval&&3!==n.oldval||e(function(){resize(0),resize(94),i.$broadcast("size-changed")},300)}),$(t).on("mousedown",function(e){e.preventDefault(),1==e.buttons&&(o=!0)}),$(t).on("mouseup",function(e){o=!1}),$(window).on("mouseup",function(e){o=!1}),$(window).on("mousemove",function(e){o&&(e.preventDefault(),a=$(t).offset().left,resize(a-e.pageX)&&(i.$apply(),i.$broadcast("size-changed")))}).resize(function(){i.mobile||$(".right-side").prop("style").width&&resize(0)&&i.$broadcast("size-changed")}),$(t).on("touchmove",function(e){a=$(t).offset().left,resize(a-e.originalEvent.changedTouches[0].pageX)&&(i.$apply(),i.$broadcast("size-changed"))})}}}]);
